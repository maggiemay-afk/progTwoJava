package assignmentOne;

import javax.swing.*;
import java.io.*;
import java.util.*;

public class Payroll {

		final static Double lowTaxRate = .18;
		final static Double middleTaxRate = .23;
		final static Double highTaxRate = .28;
		final static Double otherTaxRate = .33;
		final static Double lowTaxBracket = 250.00;
		final static Double middleTaxBracket = 550.00;
		final static Double highTaxBracket = 1100.00;
		
		static String lastName, firstName;
		static Double payRate, hoursWorked, taxRate; 
		static Double totalPayroll = 0.0, totalTaxes = 0.0, payrollChecksTotal = 0.0;
		static Double grossSalary, taxes, netIncome;
		
	public static void main(String[] args) throws FileNotFoundException{
	
		int countOfEmployees = Integer.parseInt(JOptionPane.showInputDialog("Enter the number of "
				+ "employees in the file")); //23 employees in txt file
		
		Scanner inFile = new Scanner(new FileReader("c:\\Users\\Maggie Herms\\Documents\\progTwoJava\\assignmentOne\\employees.txt")); 
		PrintWriter outFile = new PrintWriter("c:\\Users\\Maggie Herms\\Documents\\progTwoJava\\assignmentOne\\payroll.txt");

		
		for (int i = 1; i <= countOfEmployees; i++) {
			lastName = inFile.next();
			firstName = inFile.next();
			hoursWorked = inFile.nextDouble();
			payRate = inFile.nextDouble();
			
			JOptionPane.showMessageDialog(null, "Processing: " + firstName + " " + lastName, "PROCESSING", JOptionPane.INFORMATION_MESSAGE);
			
			grossSalary = (hoursWorked * payRate);
			taxRate = getTaxRate(grossSalary);
			taxes = (taxRate * grossSalary);
			netIncome = (grossSalary - taxes);
			
			outFile.format("First Name:\t%s\n Last Name:\t%s\n Pay Rate:\t$%.2f\n Hours Worked:\t%.2f\n Gross Salary:\t$%.2f\n Taxes:\t$%.2f\n Net Income:\t$%.2f\n ", firstName, lastName, payRate, hoursWorked, grossSalary, taxes, netIncome);
			
			totalPayroll += grossSalary;
			totalTaxes += taxes;
			payrollChecksTotal += netIncome;
			
		}
		
		outFile.format("");
		JOptionPane.showMessageDialog(null,"Payroll Processing Complete", "Program Finished",JOptionPane.INFORMATION_MESSAGE);
	
		outFile.flush();
		inFile.close();
		outFile.close();
	}
	
	public static Double getTaxRate(double employeeSalary) {
		
		if (employeeSalary <= lowTaxBracket) {
			taxRate = lowTaxRate;
		} else if (employeeSalary <= middleTaxBracket) {
			taxRate = middleTaxRate;
		} else if (employeeSalary <= highTaxBracket) {
			taxRate = highTaxRate;
		} else taxRate = otherTaxRate;
		
		return taxRate;
	}
	
}
